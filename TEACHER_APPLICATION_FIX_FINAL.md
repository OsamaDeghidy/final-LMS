# ุฅุตูุงุญ ูุธุงู ุงูููุงููุฉ ุนูู ุทูุจุงุช ุงููุนูููู - ุงูุชูุฑูุฑ ุงูููุงุฆู

## ุงููุดููุฉ ุงูุฃุณุงุณูุฉ
ูุงูุช ููุงู ูุดููุฉ ูู ูุธุงู ุงูููุงููุฉ ุนูู ุทูุจุงุช ุงููุนูููู ุญูุซ:
- ุงูุทูุจุงุช ูุงูุช ุชูุนุชูุฏ ุจูุฌุงุญ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- ููู ูุงุฆูุงุช ุงููุนูููู (Teacher objects) ูู ุชูู ุชููุดุฃ ุจุดูู ุตุญูุญ
- ุงูุนูุงูุฉ ุจูู Profile ู Teacher ูุงูุช ูุนุทูุฉ

## ุงูุฃุณุจุงุจ ุงูุฌุฐุฑูุฉ

### 1. ูุดููุฉ ูู ุงูุนูุงูุฉ ุจูู ุงูููุงุฐุฌ
```python
# ุงููุดููุฉ ุงูุฃุตููุฉ
class Teacher(models.Model):
    profile = models.ForeignKey(Profile, on_delete=models.CASCADE, null=True, blank=True)
```

**ุงููุดุงูู:**
- ูู ููู ููุงู `related_name` ูุญุฏุฏ
- ุงุณุชุฎุฏุงู `ForeignKey` ุจุฏูุงู ูู `OneToOneField`
- ุงูุนูุงูุฉ ุงูุนูุณูุฉ ูุงูุช `teacher_set` ุจุฏูุงู ูู `teacher`

### 2. ูุดููุฉ ูู ุนูููุฉ ุงูููุงููุฉ
- ูุงูุช ุฏุงูุฉ `approve()` ูู `TeacherApplication` ุชุนูู ุจุดูู ุตุญูุญ
- ููู ุงูุนูุงูุฉ ุงููุนุทูุฉ ููุนุช ุงููุตูู ุฅูู ูุงุฆูุงุช ุงููุนูููู

## ุงูุญููู ุงููุทุจูุฉ

### 1. ุฅุตูุงุญ ุงูุนูุงูุฉ ุจูู ุงูููุงุฐุฌ
```python
# ุงูุญู ุงูููุงุฆู
class Teacher(models.Model):
    profile = models.OneToOneField(Profile, on_delete=models.CASCADE, null=True, blank=True, related_name='teacher')
```

**ุงูุชุญุณููุงุช:**
- โ ุชุบููุฑ ุฅูู `OneToOneField` ูุถูุงู ูุนูู ูุงุญุฏ ููู ููู ุดุฎุตู
- โ ุฅุถุงูุฉ `related_name='teacher'` ูููุตูู ุงููุจุงุดุฑ
- โ ุฅูุดุงุก migrations ููุงุณุจุฉ

### 2. ุฅูุดุงุก ุฃูุฑ ุฅุฏุงุฑุฉ ููุฅุตูุงุญ
```bash
python manage.py fix_missing_teacher_objects
```

**ูุธุงุฆู ุงูุฃูุฑ:**
- โ ุงูุจุญุซ ุนู ุทูุจุงุช ูุนุชูุฏุฉ ุจุฏูู ูุงุฆูุงุช ูุนูููู
- โ ุฅูุดุงุก ูุงุฆูุงุช ุงููุนูููู ุงูููููุฏุฉ
- โ ุชุญุฏูุซ ุญุงูุงุช ุงููููุงุช ุงูุดุฎุตูุฉ
- โ ูุญุต ููุงุฆู ููุชุฃูุฏ ูู ุงูุฅุตูุงุญ

## ุงููุชุงุฆุฌ

### ูุจู ุงูุฅุตูุงุญ
```
๐ ุทูุจุงุช ูุนุชูุฏุฉ: 1
๐จโ๐ซ ูููุงุช ุดุฎุตูุฉ ูููุนูููู: 1
๐งโ๐ซ ูุงุฆูุงุช ุงููุนูููู: 1 (ููุฅุฏูู ููุท)

โ esraa@gmail.com: ุทูุจ ูุนุชูุฏ ููู ุจุฏูู ูุงุฆู ูุนูู
```

### ุจุนุฏ ุงูุฅุตูุงุญ
```
๐ ุทูุจุงุช ูุนุชูุฏุฉ: 1
๐จโ๐ซ ูููุงุช ุดุฎุตูุฉ ูููุนูููู: 1
๐งโ๐ซ ูุงุฆูุงุช ุงููุนูููู: 2

โ esraa@gmail.com: ุทูุจ ูุนุชูุฏ + ูุงุฆู ูุนูู (ID: 3)
โ osama@gmail.com: ุฅุฏูู + ูุงุฆู ูุนูู (ID: 1)
```

## ุงููููุงุช ุงูููุญุฏุซุฉ

### 1. ุงูููุงุฐุฌ
- `user/models.py`: ุชุญุฏูุซ ูููุฐุฌ Teacher
- `user/migrations/0004_alter_teacher_profile.py`: ุฅุถุงูุฉ related_name
- `user/migrations/0005_alter_teacher_profile.py`: ุชุบููุฑ ุฅูู OneToOneField

### 2. ุฃูุงูุฑ ุงูุฅุฏุงุฑุฉ
- `website/management/commands/fix_missing_teacher_objects.py`: ุฃูุฑ ุฅุตูุงุญ ูุงุฆูุงุช ุงููุนูููู ุงูููููุฏุฉ

## ุงูุชุญูู ูู ุงูุฅุตูุงุญ

### ุงุฎุชุจุงุฑ ุงูุนูุงูุฉ
```python
# ุงูุขู ูุนูู ุจุดูู ุตุญูุญ
profile = Profile.objects.get(user__email='esraa@gmail.com')
print(hasattr(profile, 'teacher'))  # True
print(profile.teacher.id)  # 3
```

### ุงุฎุชุจุงุฑ ุงูุตูุงุญูุงุช
```python
# ุงูุขู ูุนูู ูู ุฌููุน ุงูู views
profile.is_teacher_or_admin()  # True ูููุนูููู ูุงูุฅุฏูู
profile.get_teacher_object()   # ูุนูุฏ ูุงุฆู ุงููุนูู
```

## ุงูุญุงูุฉ ุงูููุงุฆูุฉ
๐ **ุชู ุญู ุงููุดููุฉ ุจุงููุงูู!**

- โ ุฌููุน ุทูุจุงุช ุงููุนูููู ุงููุนุชูุฏุฉ ููุง ูุงุฆูุงุช ูุนูููู
- โ ุงูุนูุงูุงุช ุจูู ุงูููุงุฐุฌ ุชุนูู ุจุดูู ุตุญูุญ
- โ ุงูุตูุงุญูุงุช ุชุนูู ูู ุฌููุน ุฃุฌุฒุงุก ุงููุธุงู
- โ ุงูุฅุฏูู ูุญุชูุธ ุจุตูุงุญูุงุช ุงููุนูู
- โ ุงููุธุงู ุฌุงูุฒ ููุงุณุชุฎุฏุงู

## ุฃูุงูุฑ ูููุฏุฉ ูููุณุชูุจู

### ูุญุต ุญุงูุฉ ุงููุธุงู
```bash
python manage.py fix_missing_teacher_objects --dry-run
```

### ุฅุตูุงุญ ูุดุงูู ุฌุฏูุฏุฉ
```bash
python manage.py fix_missing_teacher_objects
```

### ูุญุต ุงูุตูุงุญูุงุช
```python
# ูู Django shell
from user.models import Profile
profile = Profile.objects.get(user__email='email@example.com')
print(f"Is teacher or admin: {profile.is_teacher_or_admin()}")
print(f"Teacher object: {profile.get_teacher_object()}")
```

---
**ุชุงุฑูุฎ ุงูุฅุตูุงุญ:** $(date)
**ุงูุญุงูุฉ:** ููุชูู โ 