{% extends 'main/dashboard_base.html' %}
{% load static %}
{% block head %} {% endblock %} {% block title %}
{% endblock %} 
{% block dashboard_content %}

<div class="col-lg-8">
    <div class="row justify-content-center">
        <div class="col-lg-10">
         <div class="card border-0 shadow-lg">
        <div class="card-header  text-white py-3" style="background: linear-gradient(135deg, #1d3b53 0%, #2a5a7c 100%);">
          <h2 class="h4 mb-0"><i class="fas fa-plus-circle me-2"></i> إضافة موديول جديد</h2>
        </div>
        <div class="card-body p-4">
          <form method="POST" enctype="multipart/form-data" action="">
            {% csrf_token %}
            <div class="mb-4">
              <label class="form-label fw-bold text-dark">اسم الموديول</label>
              <div class="input-group">
                <span class="input-group-text bg-light"><i class="fas fa-heading text-primary"></i></span>
                <input type="text" class="form-control" name="module_name" placeholder="أدخل اسم الموديول" required>
              </div>
            </div>

            <div class="mb-4">
              <label class="form-label fw-bold text-dark">تحميل الفيديوهات</label>
              <input type="file" class="form-control" name="video" accept="video/*" multiple required>
              <small class="text-muted mt-2 d-block">الصيغ المدعومة: MP4, MOV, AVI</small>
            </div>

            <div class="mb-4">
              <label class="form-label fw-bold text-dark">ملاحظات إضافية</label>
              <textarea class="form-control" name="notes[]" rows="4" placeholder="أدخل أي ملاحظات إضافية..."></textarea>
            </div>

            <div class="mb-4">
              <div class="d-flex justify-content-between align-items-center mb-2">
                <label class="form-label fw-bold text-dark">عناوين الفيديوهات</label>
                <button type="button" class="btn btn-sm rounded-pill" style="background-color: #2e77b2; color: #ffffff;" onclick="addVideoName()"><i class="fas fa-plus me-1"></i> إضافة عنوان</button>
              </div>
              <div id="video_names">
                <div class="input-group mb-2">
                  <span class="input-group-text bg-light"><i class="fas fa-video text-primary"></i></span>
                  <input type="text" class="form-control" name="video_names[]" placeholder="أدخل عنوان الفيديو" required>
                </div>
              </div>
            </div>

            <div class="d-flex justify-content-center mt-4"> 
              <button type="submit" class="btn btn-lg px-5" style="background-color: #265a84; color: #ffffff;"><i class="fas fa-save ms-2"></i> حفظ </button>
            </div>
          </form>
        </div>
      </div>
    </div>
</div>




<style>
  .bg-gradient-primary {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  }
  
  .card {
      border-radius: 12px;
      overflow: hidden;
  }
  
  .form-control, .form-control-lg, .input-group-text {
      border-radius: 8px !important;
  }
  
  .form-control:focus {
      border-color: #667eea;
      box-shadow: 0 0 0 0.25rem rgba(102, 126, 234, 0.25);
  }
  
  .file-upload-wrapper {
      position: relative;
  }
  
  .file-upload-info {
      border-left: 3px solid #667eea;
  }
  
  .video-names-container {
      max-height: 300px;
      overflow-y: auto;
      padding-right: 8px;
  }
  
  /* Custom scrollbar */
  .video-names-container::-webkit-scrollbar {
      width: 6px;
  }
  
  .video-names-container::-webkit-scrollbar-track {
      background: #f1f1f1;
      border-radius: 10px;
  }
  
  .video-names-container::-webkit-scrollbar-thumb {
      background: #667eea;
      border-radius: 10px;
  }
  
  .video-names-container::-webkit-scrollbar-thumb:hover {
      background: #555;
  }
</style>


<script>
 function addVideoName() {
      const container = document.getElementById('video_names');
      const newInput = document.createElement('div');
      newInput.className = 'input-group mb-2';
      newInput.innerHTML = `
          <span class="input-group-text bg-light"><i class="fas fa-video text-primary"></i></span>
          <input type="text" class="form-control" name="video_names[]" placeholder="Enter video title" required>
          <button type="button" class="btn btn-outline-danger" onclick="this.parentElement.remove()">
              <i class="fas fa-times"></i>
          </button>
      `;
      container.appendChild(newInput);
  }


  function addNote() {
    var notesDiv = document.getElementById("additional_notes");
    var noteInput = document.createElement("div");
    noteInput.classList.add("note-input");
    noteInput.innerHTML = `
        <textarea class="form-control border-dark" name="notes[]" rows="3"></textarea>
        <button type="button" class="btn btn-danger" onclick="removeNote(this)">-</button>
    `;
    notesDiv.appendChild(noteInput);

    try {
      CKEDITOR.replace(notesDiv.lastChild.firstChild);
    } catch (error) {
      console.log(error);
    }
  }

  function removeNote(btn) {
    var noteInput = btn.parentNode;
    noteInput.remove();
  }

  function addVideoName() {
    var videoNamesDiv = document.getElementById("video_names");
    var videoNameInput = document.createElement("div");
    videoNameInput.classList.add("video-name-input");
    videoNameInput.innerHTML = `
        <input type="text" class="form-control border-dark my-1" name="video_names[]" required>
        <button type="button" class="btn btn-danger my-2" onclick="removeVideoName(this)">-</button>
    `;
    videoNamesDiv.appendChild(videoNameInput);
  }

  function removeVideoName(btn) {
    var videoNameInput = btn.parentNode;
    videoNameInput.remove();
  }

  try {
    CKEDITOR.replace("additional_notes");
  } catch (error) {
    console.log(error);
  }
</script>

{% endblock dashboard_content %}
