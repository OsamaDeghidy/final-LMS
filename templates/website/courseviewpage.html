{% extends 'main/base.html' %}

{% load static %}
{% load course_filters %}

{% block title %}{{ course.name }} - دورة تدريبية{% endblock %}

{% block head %}
    {{ block.super }}
<link rel="stylesheet" href="{% static 'css/course-view.css' %}">
<script src="{% static 'js/course-view.js' %}"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<meta name="course-id" content="{{ course.id }}">
{% endblock %}

{% block content %}

<div class="container py-4" dir="rtl">
  <div class="row g-4">
    <!-- المحتوى الرئيسي -->
    <div class="col-lg-8">
      <!-- مشغل الوسائط -->
      <div id="dynamic-content-area">
        {% if current_content.type == 'video' %}
        <!-- فيديو -->
        <div class="video-wrapper">
          <video id="course-video" class="w-100" controls
                 poster="{% if course.image_course %}{{ course.image_course.url }}{% endif %}"
                 data-video-id="{{ current_content.content.id }}">
            <source src="{{ current_content.content.video.url }}" type="video/mp4">
            متصفحك لا يدعم تشغيل الفيديو
          </video>
          <div class="video-controls">
            <div class="progress-container">
              <div class="progress-bar" style="width: 0%"></div>
            </div>
          </div>
        </div>
        {% elif current_content.type == 'quiz' %}
        <!-- كويز -->
        <div class="quiz-section">
          {% include 'website/quiz_detail_inline.html' with quiz=current_content.content %}
        </div>
        {% elif current_content.type == 'assignment' %}
        <!-- واجب -->
        <div class="assignment-section">
          {% include 'website/assignment_detail_inline.html' with assignment=current_content.content %}
        </div>
        {% elif current_content.type == 'pdf' %}
        <!-- ملف PDF -->
        <div class="pdf-viewer">
          <embed src="{{ current_content.content.file.url }}" 
                 type="application/pdf" class="w-100 h-100">
        </div>
        {% endif %}
        <!-- معلومات المحتوى -->
        <div class="card-body content-info">
          <div class="d-flex justify-content-between align-items-start mb-3">
            <div>
              <h2 class="content-title">
                {% if current_content.type == 'video' %}
                <i class="fas fa-play-circle text-primary me-2"></i>
                {% elif current_content.type == 'quiz' %}
                <i class="fas fa-question-circle text-warning me-2"></i>
                {% elif current_content.type == 'assignment' %}
                <i class="fas fa-tasks text-success me-2"></i>
                {% elif current_content.type == 'pdf' %}
                <i class="fas fa-file-pdf text-danger me-2"></i>
                {% endif %}
                {{ current_content.content.title }}
              </h2>
              {% if current_content.type == 'video' %}
              <span class="badge duration-badge">
                <i class="far fa-clock me-1"></i> 
                {{ current_content.content.duration|default:'10:00' }}
              </span>
              {% endif %}
            </div>
          </div>
          <p class="content-description">
            {% if current_content.type == 'video' %}
              {{ current_content.content.description|default:"لا يوجد وصف متاح لهذا الفيديو." }}
            {% elif current_content.type == 'quiz' %}
              اختبار قصير لتقييم فهمك لهذا الدرس.
            {% elif current_content.type == 'assignment' %}
              واجب عملي لتعزيز التعلم.
            {% elif current_content.type == 'pdf' %}
              ملاحظات مرفقة لمساعدتك في فهم المحتوى بشكل أفضل.
            {% endif %}
          </p>
          {% if current_content.type == 'video' and current_content.content.resources %}
          <div class="attachments mt-4">
            <h5 class="attachments-title">
              <i class="fas fa-paperclip me-2"></i>الملفات المرفقة
            </h5>
            <div class="d-flex flex-wrap gap-2">
              {% for resource in current_content.content.resources.all %}
              <a href="{{ resource.file.url }}" class="btn download-btn">
                <i class="fas fa-download me-1"></i> 
                {{ resource.name }}
              </a>
              {% endfor %}
            </div>
          </div>
          {% endif %}
        </div>
        {% if next_content %}
        <div class="text-center my-4">
          <button id="next-content-btn" class="btn btn-primary px-5 py-2" 
                 data-next-type="{{ next_content.type }}" 
                 data-next-id="{{ next_content.content.id }}">
            التالي <i class="fas fa-arrow-left ms-2"></i>
          </button>
        </div>
        {% endif %}
      </div>
      
      <!-- محتوى الدورة -->
      <div class="card curriculum-card shadow-lg border-0 rounded-4">
        <div class="card-header">
          <h3 class="mb-0">محتوى الدورة</h3>
        </div>
        
        <div class="accordion curriculum-accordion">
          {% for module in course.module_set.all %}
          <div class="accordion-item module-item">
            <div class="accordion-header module-header" 
                 data-bs-toggle="collapse" 
                 data-bs-target="#module-{{ module.id }}">
              <div class="d-flex w-100 align-items-center">
                <span class="module-number">{{ forloop.counter }}</span>
                <h4 class="module-title">{{ module.name }}</h4>
                <span class="module-stats ms-auto">
                  {{ forloop.counter }} من {{ modules|length }}
                </span>
                <i class="fas fa-chevron-down toggle-icon"></i>
              </div>
            </div>
            
            <div id="module-{{ module.id }}" class="accordion-collapse collapse {% if forloop.first %}show{% endif %}">
              <div class="accordion-body p-0">
                <!-- فيديوهات -->
                {% for video in course.video_set.all %}
                  {% if video.module.id == module.id %}
                  <a href="{% url 'courseviewpage' course.id %}?content_type=video&content_id={{ video.id }}" 
                     class="content-item {% if current_content.type == 'video' and current_content.content.id == video.id %}active{% endif %} {% if video.id in completed_videos %}completed{% endif %}"
                     data-content-type="video" 
                     data-content-id="{{ video.id }}">
                    <div class="content-icon">
                      <i class="fas {% if video.id in completed_videos %}fa-check-circle{% else %}fa-play{% endif %}"></i>
                    </div>
                    <div class="content-details">
                      <h5>{{ video.name }}</h5>
                      <div class="content-meta">
                        <span><i class="far fa-clock"></i> {{ video.duration|default:'10:00' }}</span>
                        <span><i class="fas fa-video"></i> فيديو</span>
                      </div>
                    </div>
                    {% if video.id in completed_videos %}
                    <div class="completed-badge">
                      <i class="fas fa-check"></i>
                    </div>
                    {% endif %}
                  </a>
                  {% endif %}
                {% endfor %}
                
                <!-- ملفات PDF -->
                {% for pdf in course.pdf_set.all %}
                  {% if pdf.module.id == module.id %}
                  <a href="{% url 'courseviewpage' course.id %}?content_type=pdf&content_id={{ pdf.id }}" 
                     class="content-item {% if current_content.type == 'pdf' and current_content.content.id == pdf.id %}active{% endif %} {% if pdf.id in completed_pdfs %}completed{% endif %}"
                     data-content-type="pdf" 
                     data-content-id="{{ pdf.id }}">
                    <div class="content-icon">
                      <i class="fas {% if pdf.id in completed_pdfs %}fa-check-circle{% else %}fa-file-pdf{% endif %}"></i>
                    </div>
                    <div class="content-details">
                      <h5>{{ pdf.title }}</h5>
                      <div class="content-meta">
                        <span><i class="fas fa-file-pdf"></i> ملف PDF</span>
                      </div>
                    </div>
                    {% if pdf.id in completed_pdfs %}
                    <div class="completed-badge">
                      <i class="fas fa-check"></i>
                    </div>
                    {% endif %}
                  </a>
                  {% endif %}
                {% endfor %}
                
                <!-- اختبارات -->
                {% for quiz in module.quiz_set.all %}
                  <a href="{% url 'courseviewpage' course.id %}?content_type=quiz&content_id={{ quiz.id }}" 
                     class="content-item {% if current_content.type == 'quiz' and current_content.content.id == quiz.id %}active{% endif %} {% if quiz in completed_quizzes %}completed{% endif %}"
                     data-content-type="quiz" 
                     data-content-id="{{ quiz.id }}">
                    <div class="content-icon">
                      <i class="fas {% if quiz in completed_quizzes %}fa-check-circle{% else %}fa-question-circle{% endif %}"></i>
                    </div>
                    <div class="content-details">
                      <h5>{{ quiz.title }}</h5>
                      <div class="content-meta">
                        <span><i class="far fa-clock"></i> {{ quiz.time_limit|default:'15' }} دقيقة</span>
                        <span><i class="fas fa-question-circle"></i> اختبار</span>
                      </div>
                    </div>
                    {% if quiz in completed_quizzes %}
                    <div class="completed-badge">
                      <i class="fas fa-check"></i>
                    </div>
                    {% endif %}
                  </a>
                {% endfor %}
                
                <!-- واجبات -->
                {% for assignment in assignments %}
                  {% if assignment.module.id == module.id %}
                  <a href="{% url 'courseviewpage' course.id %}?content_type=assignment&content_id={{ assignment.id }}" 
                     class="content-item {% if current_content.type == 'assignment' and current_content.content.id == assignment.id %}active{% endif %} {% if assignment.id in completed_assignments %}completed{% endif %}"
                     data-content-type="assignment" 
                     data-content-id="{{ assignment.id }}">
                    <div class="content-icon">
                      <i class="fas {% if assignment.id in completed_assignments %}fa-check-circle{% else %}fa-tasks{% endif %}"></i>
                    </div>
                    <div class="content-details">
                      <h5>{{ assignment.title }}</h5>
                      <div class="content-meta">
                        <span><i class="far fa-calendar-alt"></i> {{ assignment.due_date|date:"d/m/Y"|default:'لا يوجد موعد' }}</span>
                        <span><i class="fas fa-tasks"></i> واجب</span>
                      </div>
                    </div>
                    {% if assignment.id in completed_assignments %}
                    <div class="completed-badge">
                      <i class="fas fa-check"></i>
                    </div>
                    {% endif %}
                  </a>
                  {% endif %}
                {% endfor %}
              </div>
            </div>
          </div>
          {% endfor %}
        </div>
      </div>
    </div>
    
    <!-- الجانب الأيمن -->
    <div class="col-lg-4">
      <!-- بطاقة الدورة -->
      <div class="card course-card shadow-lg border-0 rounded-4 overflow-hidden">
        {% if course.image_course %}
        <img src="{{ course.image_course.url }}" class="course-thumbnail" alt="{{ course.name }}">
        {% endif %}
        <div class="card-body">
          <h3 class="course-title">{{ course.name }}</h3>
          <p class="course-description">{{ course.description|truncatewords:15 }}</p>
          
          <div class="course-badges">
            <span class="badge lessons-badge">
              <i class="fas fa-graduation-cap"></i> 
              {{ course.total_video }} دروس
            </span>
            <span class="badge level-badge">
              <i class="fas fa-signal"></i> 
              {{ course.get_level_display }}
            </span>
          </div>
          
          <div class="progress-section">
            <div class="progress-wrapper">
              <div class="progress" style="height: 10px;">
                <div class="progress-bar" role="progressbar" 
                     style="width: {{ progress }}%" 
                     aria-valuenow="{{ progress }}" 
                     aria-valuemin="0" aria-valuemax="100"></div>
              </div>
              <span class="progress-text">إكمال الدورة: {{ progress }}%</span>
            </div>
            
            <div class="stats-grid">
              <div class="stat-item">
                <i class="fas fa-play-circle"></i>
                <span>{{ completed_videos|length }}/{{ course.total_video|default:0 }}</span>
              </div>
              {% if quizzes_count %}
              <div class="stat-item">
                <i class="fas fa-question-circle"></i>
                <span>{{ completed_quizzes|length }}/{{ quizzes_count }}</span>
              </div>
              {% endif %}
              {% if assignments_count %}
              <div class="stat-item">
                <i class="fas fa-tasks"></i>
                <span>{{ completed_assignments|length }}/{{ assignments_count }}</span>
              </div>
              {% endif %}
              {% if pdfs_count %}
              <div class="stat-item">
                <i class="fas fa-file-pdf"></i>
                <span>{{ completed_pdfs|length }}/{{ pdfs_count }}</span>
              </div>
              {% endif %}
            </div>
          </div>
        </div>
      </div>
      
      <!-- بطاقة المدرب -->
      <div class="card instructor-card shadow-lg border-0 rounded-4 mt-4">
        <div class="card-body">
          <h4 class="card-title">مقدم الدورة</h4>
          <div class="instructor-profile">
            {% if course.teacher.profile.image %}
            <img src="{{ course.teacher.profile.image.url }}" 
                 class="instructor-avatar" 
                 alt="{{ course.teacher.profile.name }}">
            {% else %}
            <div class="avatar-placeholder">
              {{ course.teacher.profile.name|slice:':1'|upper }}
            </div>
            {% endif %}
            <div class="instructor-info">
              <h5>{{ course.teacher.profile.name }}</h5>
              <p>مدرب معتمد</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  // تفاعلات جافاسكريبت
  document.addEventListener('DOMContentLoaded', function() {
    // تحكم في الفيديو
    const video = document.getElementById('course-video');
    if (video) {
      const progressBar = document.querySelector('.progress-bar');
      
      video.addEventListener('timeupdate', function() {
        const percent = (video.currentTime / video.duration) * 100;
        progressBar.style.width = percent + '%';
      });
      
      document.querySelector('.progress-container').addEventListener('click', function(e) {
        const percent = e.offsetX / this.offsetWidth;
        video.currentTime = percent * video.duration;
      });
    }
    
    // تفعيل أكورديون الوحدات
    const moduleHeaders = document.querySelectorAll('.module-header');
    moduleHeaders.forEach(header => {
      header.addEventListener('click', function() {
        const icon = this.querySelector('.toggle-icon');
        icon.classList.toggle('fa-chevron-up');
        icon.classList.toggle('fa-chevron-down');
      });
    });
  });
</script>


{% endblock content %}


<!-- <div class="container py-4" dir="rtl">
  <div class="row">
    
    <div class="col-md-8">
      <div class="card shadow-sm border-0 rounded-4 overflow-hidden mb-4">
     
        <div class="video-container bg-dark position-relative">
          {% if current_content.type == 'video' %}
            <video src="{{ current_content.content.video.url }}" 
                   class="w-100" controls id="course-video" data-video-id="{{ current_content.content.id }}"
                   poster="{% if course.image_course %}{{ course.image_course.url }}{% endif %}" 
                   style="max-height: 450px;">
              Your browser does not support the video tag.
            </video>
            <div class="video-controls-overlay">
              <div class="video-progress">
                <div class="video-progress-bar" style="width: 0%"></div>
              </div>
            </div>
          {% else %}
            <div class="pdf-viewer-container" style="height: 450px;">
              <embed src="{{ current_content.content.file.url }}" 
                     type="application/pdf" width="100%" height="100%">
            </div>
          {% endif %}
        </div>
        
      
        <div class="card-body">
          <div class="d-flex justify-content-between align-items-center mb-3">
            <h5 class="card-title fw-bold mb-0">
              {% if current_content.type == 'video' %}
                <i class="fas fa-play-circle text-primary me-2"></i>{{ current_content.content.title }}
              {% elif current_content.type == 'pdf' %}
                <i class="fas fa-file-pdf text-danger me-2"></i>{{ current_content.content.title }}
              {% endif %}
            </h5>
            <div class="content-meta">
              {% if current_content.type == 'video' %}
                <span class="badge bg-light text-dark">
                  <i class="far fa-clock me-1"></i> {{ current_content.content.duration|default:'10:00' }}
                </span>
              {% endif %}
            </div>
          </div>
          
          <p class="text-muted">
            {% if current_content.type == 'video' %}
              {{ current_content.content.description|default:"لا يوجد وصف متاح لهذا الفيديو." }}
            {% else %}
              ملاحظات مرفقة لمساعدتك في فهم المحتوى بشكل أفضل.
            {% endif %}
          </p>
          
          {% if current_content.type == 'video' and current_content.content.resources %}
            <div class="resources-section mt-4">
              <h6 class="fw-bold mb-3"><i class="fas fa-paperclip me-2"></i>الملفات المرفقة</h6>
              <div class="d-flex flex-wrap gap-2">
                {% for resource in current_content.content.resources.all %}
                  <a href="{{ resource.file.url }}" class="btn btn-sm btn-outline-primary rounded-pill">
                    <i class="fas fa-download me-1"></i> {{ resource.name }}
                  </a>
                {% endfor %}
              </div>
            </div>
          {% endif %}
        </div>
      </div>
      
  
      <div class="card shadow-sm border-0 rounded-4 mt-4">
        <div class="card-body p-0">
          <div class="p-4 border-bottom">
            <h5 class="fw-bold mb-0">محتوى الدورة</h5>
          </div>
          
          <div class="module-list">
            {% for module in course.module_set.all %}
            <div class="module-container mb-1">
              <div class="module-header p-3 d-flex justify-content-between align-items-center" 
                   data-bs-toggle="collapse" data-bs-target="#module-content-{{ module.id }}" 
                   aria-expanded="{% if forloop.first %}true{% else %}false{% endif %}" aria-controls="module-content-{{ module.id }}">
                <div class="d-flex align-items-center">
                  <div class="module-number me-3 bg-primary text-white rounded-circle d-flex align-items-center justify-content-center" 
                       style="width: 28px; height: 28px; font-size: 14px;">
                    {{ forloop.counter }}
                  </div>
                  <h6 class="mb-0 fw-bold" style="padding-right: 10px;">{{ module.name }}</h6>
                </div>
                <div class="d-flex align-items-center">
                  <span class="module-progress me-3 small">
             
                    {{ forloop.counter }} من {{ modules|length }}
                  </span>
                  <i class="fas {% if forloop.first %}fa-chevron-up{% else %}fa-chevron-down{% endif %}"></i>
                </div>
              </div>
              
              <div id="module-content-{{ module.id }}" class="collapse {% if forloop.first %}show{% endif %}">
                <div class="list-group list-group-flush">
                  
             
                  {% for video in course.video_set.all %}
                    {% if video.module.id == module.id %}
                    <a href="{% url 'courseviewpagevideo' course.id video.id %}" 
                       class="content-item list-group-item list-group-item-action border-0 py-3 d-flex align-items-center {% if current_content.type == 'video' and current_content.content.id == video.id %}active{% endif %} {% if video.id in completed_videos %}completed{% endif %}" 
                       data-video-id="{{ video.id }}">
                      <div class="content-icon me-3 {% if video.id in completed_videos %}bg-success-soft{% endif %}">
                        <i class="fas {% if video.id in completed_videos %}fa-check text-success{% else %}fa-play-circle text-primary{% endif %}"></i>
                      </div>
                      <div class="content-info flex-grow-1">
                        <h6 class="mb-0 fw-semibold" style="padding-right: 10px;">{{ video.name }}</h6>
                        <div class="d-flex align-items-center">
                          <small class="text-muted me-2">
                            <i class="far fa-clock me-1"></i>{{ video.duration|default:'10:00' }}
                          </small>
                          <small class="text-muted">
                            <i class="fas fa-video me-1"></i>فيديو
                          </small>
                        </div>
                      </div>
                      {% if video.id in completed_videos %}
                        <span class="ms-2 text-success">
                          <i class="fas fa-check-circle"></i>
                        </span>
                      {% endif %}
                    </a>
                    {% endif %}
                  {% endfor %}
                  
           
                  {% for pdf in course.pdf_set.all %}
                    {% if pdf.module.id == module.id %}
                    <a href="{% url 'courseviewpagenote' course.id pdf.id %}" 
                       class="content-item list-group-item list-group-item-action border-0 py-3 d-flex align-items-center {% if current_content.type == 'note' and current_content.content.id == pdf.id %}active{% endif %} {% if pdf.id in completed_pdfs %}completed{% endif %}" 
                       data-pdf-id="{{ pdf.id }}">
                      <div class="content-icon me-3 {% if pdf.id in completed_pdfs %}bg-success-soft{% endif %}">
                        <i class="fas {% if pdf.id in completed_pdfs %}fa-check text-success{% else %}fa-file-pdf text-danger{% endif %}"></i>
                      </div>
                      <div class="content-info flex-grow-1">
                        <h6 class="mb-0 fw-semibold" style="padding-right: 10px;">{{ pdf.title }}</h6>
                        <small class="text-muted">
                          <i class="fas fa-file-pdf me-1"></i>ملف PDF
                        </small>
                      </div>
                      {% if pdf.id in completed_pdfs %}
                        <span class="ms-2 text-success">
                          <i class="fas fa-check-circle"></i>
                        </span>
                      {% endif %}
                    </a>
                    {% endif %}
                  {% endfor %}
                  
            
                  {% for quiz in quizzes %}
                    {% if quiz.module.id == module.id %}
                    <a href="{% url 'quiz_detail' quiz.id %}" 
                       class="content-item list-group-item list-group-item-action border-0 py-3 d-flex align-items-center {% if quiz.id in completed_quizzes %}completed{% endif %}" 
                       data-quiz-id="{{ quiz.id }}">
                      <div class="content-icon me-3 {% if quiz.id in completed_quizzes %}bg-success-soft{% endif %}">
                        <i class="fas {% if quiz.id in completed_quizzes %}fa-check text-success{% else %}fa-question-circle text-warning{% endif %}"></i>
                      </div>
                      <div class="content-info flex-grow-1">
                        <h6 class="mb-0 fw-semibold" style="padding-right: 10px;">{{ quiz.title }}</h6>
                        <div class="d-flex align-items-center">
                          <small class="text-muted me-2">
                            <i class="far fa-clock me-1" ></i>{{ quiz.time_limit|default:'15' }} دقيقة
                          </small>
                          <small class="text-muted">
                            <i class="fas fa-question-circle me-1"></i>اختبار
                          </small>
                        </div>
                      </div>
                      {% if quiz.id in completed_quizzes %}
                        <span class="ms-2 text-success">
                          <i class="fas fa-check-circle"></i>
                        </span>
                      {% endif %}
                    </a>
                    {% endif %}
                  {% endfor %}
                  
                  
                  {% for assignment in assignments %}
                    {% if assignment.module.id == module.id %}
                    <a href="{% url 'assignment_detail' assignment.id %}" 
                       class="content-item list-group-item list-group-item-action border-0 py-3 d-flex align-items-center {% if assignment.id in completed_assignments %}completed{% endif %}" 
                       data-assignment-id="{{ assignment.id }}">
                      <div class="content-icon me-3 {% if assignment.id in completed_assignments %}bg-success-soft{% endif %}">
                        <i class="fas {% if assignment.id in completed_assignments %}fa-check text-success{% else %}fa-tasks text-success{% endif %}"></i>
                      </div>
                      <div class="content-info flex-grow-1">
                        <h6 class="mb-0 fw-semibold" style="padding-right: 10px;">{{ assignment.title }}</h6>
                        <div class="d-flex align-items-center">
                          <small class="text-muted me-2">
                            <i class="far fa-calendar-alt me-1"></i>{{ assignment.due_date|date:"d/m/Y"|default:'لا يوجد موعد تسليم' }}
                          </small>
                          <small class="text-muted">
                            <i class="fas fa-tasks me-1"></i>واجب
                          </small>
                        </div>
                      </div>
                      {% if assignment.id in completed_assignments %}
                        <span class="ms-2 text-success">
                          <i class="fas fa-check-circle"></i>
                        </span>
                      {% endif %}
                    </a>
                    {% endif %}
                  {% endfor %}
                  
                </div>
              </div>
            </div>
            {% endfor %}
          </div>
        </div>
      </div>
    </div>
    
   
    <div class="col-md-4 mb-4">
      <div class="card shadow-sm border-0 rounded-4 overflow-hidden">
        {% if course.image_course %}
          <img src="{{ course.image_course.url }}" class="card-img-top" alt="{{ course.name }}">
        {% endif %}
        <div class="card-body">
          <h4 class="card-title fw-bold">{{ course.name }}</h4>
          <p class="text-muted">{{ course.description|truncatewords:15 }}</p>
          
          <div class="d-flex flex-wrap gap-2 mb-3">
            <span class="badge bg-primary bg-opacity-10 text-primary rounded-pill px-3">
              <i class="fas fa-graduation-cap me-1"></i> {{ course.total_video }} دروس
            </span>
            <span class="badge bg-primary bg-opacity-10 text-primary rounded-pill px-3">
              <i class="fas fa-signal me-1"></i> {{ course.get_level_display }}
            </span>
          </div>
          
          <div class="progress mb-3" style="height: 12px;">
            <div class="progress-bar bg-success" role="progressbar" 
                 aria-valuenow="{{ progress }}" 
                 aria-valuemin="0" aria-valuemax="100" 
                 style="width: {{ progress }}%">
            </div>
          </div>
          <div class="d-flex justify-content-between">
            <small class="text-muted progress-text">إكمال الدورة: {{ progress }}%</small>
            <small>
              <span class="badge bg-primary bg-opacity-10 text-primary rounded-pill me-1" title="فيديوهات">
                <i class="fas fa-play-circle"></i> {{ completed_videos|length }}/{{ course.total_video|default:0 }}
              </span>
              {% if quizzes_count %}
              <span class="badge bg-warning bg-opacity-10 text-warning rounded-pill me-1" title="اختبارات">
                <i class="fas fa-question-circle"></i> {{ completed_quizzes|length }}/{{ quizzes_count }}
              </span>
              {% endif %}
              {% if assignments_count %}
              <span class="badge bg-success bg-opacity-10 text-success rounded-pill me-1" title="واجبات">
                <i class="fas fa-tasks"></i> {{ completed_assignments|length }}/{{ assignments_count }}
              </span>
              {% endif %}
              {% if pdfs_count %}
              <span class="badge bg-info bg-opacity-10 text-info rounded-pill" title="ملفات PDF">
                <i class="fas fa-file-pdf"></i> {{ completed_pdfs|length }}/{{ pdfs_count }}
              </span>
              {% endif %}
            </small>
          </div>
        </div>
      </div>
      
   
      <div class="card shadow-sm border-0 rounded-4 mt-3">
        <div class="card-body">
          <h6 class="fw-bold mb-3">مقدم الدورة</h6>
          <div class="d-flex align-items-center">
            {% if course.teacher.profile.image %}
              <img src="{{ course.teacher.profile.image.url }}" 
                   class="rounded-circle me-3 border border-2 border-primary" 
                   width="60" height="60" alt="{{ course.teacher.profile.name }}">
            {% else %}
              <div class="rounded-circle bg-primary text-white d-flex align-items-center justify-content-center me-3" 
                   style="width: 60px; height: 60px;">
                {{ course.teacher.profile.name|slice:':1'|upper }}
              </div>
            {% endif %}
            <div>
              <h6 class="mb-0 fw-bold" style="padding-right: 10px;">{{ course.teacher.profile.name }}</h6>
              <small class="text-muted" style="padding-right: 10px;">مدرب معتمد</small>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div> -->
